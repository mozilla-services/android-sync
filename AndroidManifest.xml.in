#filter substitution
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.mozilla.gecko"
    sharedUserId="@MOZ_ANDROID_SHARED_ID@"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-library android:name="android.test.runner" />

    <uses-sdk android:minSdkVersion="8"
              android:targetSdkVersion="14" />

    <!--
       Note that we do not include the Announcements manifest fragments here:
       the received intents call into Fennec, so there's minimal point right
       now.
      -->

#include manifests/SyncAndroidManifest_permissions.xml.in

    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="@ANDROID_PACKAGE_NAME@.permissions.BROWSER_PROVIDER"/>
    <uses-permission android:name="@ANDROID_PACKAGE_NAME@.permissions.FORMHISTORY_PROVIDER"/>
    <uses-permission android:name="@ANDROID_PACKAGE_NAME@.permissions.PASSWORD_PROVIDER"/>

    <application android:debuggable="true"
                 android:icon="@drawable/icon"
                 android:label="@string/sync_app_name">

        <!-- These activities are intended only for developer testing,
             so we don't add them to the exported manifest files. -->
        <activity
            android:theme="@style/SyncTheme"
            android:label="Android Sync Dev Tools"
            android:name="org.mozilla.gecko.sync.setup.activities.AndroidSyncDeveloperActivity">
            <!-- Adding a launcher will make Firefox Sync appear on
                 the Apps screen, which we only want when testing. -->
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:theme="@android:style/Theme.NoDisplay"
            android:name="org.mozilla.gecko.sync.setup.activities.SyncNowActivity" />

        <activity
            android:theme="@android:style/Theme.NoDisplay"
            android:name="org.mozilla.gecko.sync.setup.activities.ResetAllStagesActivity" />

        <activity
            android:theme="@android:style/Theme.NoDisplay"
            android:name="org.mozilla.gecko.sync.setup.activities.WipeAllStagesActivity" />

        <activity
            android:theme="@android:style/Theme.NoDisplay"
            android:name="org.mozilla.gecko.sync.setup.activities.CreateTestAccountsActivity" />

        <activity
            android:theme="@style/SyncTheme"
            android:name="org.mozilla.gecko.sync.setup.activities.DumpDatabaseActivity" />

#include manifests/SyncAndroidManifest_activities.xml.in
#include manifests/SyncAndroidManifest_services.xml.in

    </application>

    <instrumentation
        android:label="Sync tests"
        android:name="android.test.InstrumentationTestRunner"
        android:targetPackage="org.mozilla.gecko" />

</manifest>
